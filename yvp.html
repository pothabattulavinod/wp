<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://ssl.p.jwpcdn.com/player/v/8.32.0/jwplayer.js"></script>
<script>
  jwplayer.key = 'cLGMn8T20tGvW+0eXPhq4NNmLB57TrscPjd1IyJF84o=';
</script>
<style>
  html, body {
    margin: 0; padding: 0; background: #000;
    width: 100%; height: 100%; overflow: hidden;
    font-family: sans-serif;
  }
  #player { width: 100%; height: 100%; }

  /* Optional HUD overlay (time only) */
  #hud {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    color: #fff;
    font-size: 24px;
    pointer-events: none;
  }
</style>
</head>
<body>
<div id="player"></div>
<div id="hud" id="timer">0:00 / 0:00</div>

<script>
const jwp = jwplayer("player");
const playbackKey = "jw-tv-playback-" + location.href;
const savedPosition = localStorage.getItem(playbackKey);
const hud = document.getElementById('hud');

// --- JWPlayer Setup ---
jwp.setup({
  file: "https://pothabattulavinod.github.io/pay/og.m3u8",
  type: "hls",
  width: "100%",
  height: "100%",
  controls: true,   // Enable full JWPlayer controls
  autostart: true,
  preload: "auto",
  primary: "html5",
  tracks: [{
    file: "https://raw.githubusercontent.com/pothabattulavinod/wp/refs/heads/main/og.vtt",
    label: "English",
    kind: "captions",
    "default": true
  }]
});

// Resume playback
jwp.on("ready", () => {
  if (savedPosition) jwp.seek(parseFloat(savedPosition));
  updateTimer();
});

// Save playback position
jwp.on("time", e => {
  localStorage.setItem(playbackKey, e.position);
  updateTimer();
});

// Clear position on complete
jwp.on("complete", () => localStorage.removeItem(playbackKey));

// --- Optional HUD Update ---
function updateTimer() {
  const pos = Math.floor(jwp.getPosition());
  const dur = Math.floor(jwp.getDuration());
  const format = t => `${Math.floor(t/60)}:${String(t%60).padStart(2,'0')}`;
  hud.textContent = `${format(pos)} / ${format(dur)}`;
}

setInterval(updateTimer, 1000);
</script>
</body>
</html>
