<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://ssl.p.jwpcdn.com/player/v/8.32.0/jwplayer.js"></script>
<script>
  jwplayer.key = 'cLGMn8T20tGvW+0eXPhq4NNmLB57TrscPjd1IyJF84o=';
</script>
<style>
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;        /* Prevent page scrolling */
    touch-action: none;      /* Prevent pointer scrolling */
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;
    background: #000;
    font-family: sans-serif;
  }

  #player {
    width: 100%;
    height: 100%;
    outline: none;           /* Remove focus outline */
  }

  /* Passive HUD overlay */
  #hud {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    color: #fff;
    font-size: 24px;
    pointer-events: none;   /* Does not intercept remote keys */
    background: rgba(0,0,0,0.3);
    padding: 5px 10px;
    border-radius: 6px;
  }
</style>
</head>
<body>

<div id="player" tabindex="0"></div>  <!-- Make player focusable -->
<div id="hud">0:00 / 0:00</div>

<script>
const jwp = jwplayer("player");
const hud = document.getElementById("hud");
const playbackKey = "jw-tv-playback-" + location.href;
const savedPosition = localStorage.getItem(playbackKey);

// --- JWPlayer Setup ---
jwp.setup({
  file: "https://pothabattulavinod.github.io/pay/og.m3u8",
  type: "hls",
  width: "100%",
  height: "100%",
  controls: true,           // Full native JWPlayer controls
  autostart: true,
  preload: "auto",
  primary: "html5",
  tracks: [{
    file: "https://raw.githubusercontent.com/pothabattulavinod/wp/refs/heads/main/og.vtt",
    label: "English",
    kind: "captions",
    "default": true
  }]
});

// --- Focus player on ready ---
jwp.on('ready', () => {
  const playerEl = document.getElementById('player');
  playerEl.focus();  // Focus player to receive D-pad / Enter keys
  if(savedPosition) jwp.seek(parseFloat(savedPosition));
  updateHUD();
});

// --- Save playback position ---
jwp.on('time', e => {
  localStorage.setItem(playbackKey, e.position);
  updateHUD();
});

// --- Clear storage on complete ---
jwp.on('complete', () => localStorage.removeItem(playbackKey));

// --- HUD update ---
function updateHUD() {
  const pos = Math.floor(jwp.getPosition());
  const dur = Math.floor(jwp.getDuration());
  const format = t => `${Math.floor(t/60)}:${String(t%60).padStart(2,'0')}`;
  hud.textContent = `${format(pos)} / ${format(dur)}`;
}

setInterval(updateHUD, 1000);
</script>

</body>
</html>
